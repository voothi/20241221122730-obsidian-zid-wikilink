# RFC - Release v1.3.2

**ZID:** 20260105220520
**Status:** Staging
**User Request:** 20260105220520

## Goal Description
Transition from boolean-based extension handling to a more granular, integer-based "digital" control system, and rename configuration variables for clarity.

## Implementation Details

### Analytics & Decisions
- **Granularity Needed**: The previous `add_extension_to_slug` (bool) and `extension_nesting_level` (int) were inconsistent. Users needed to handle complex extensions (e.g., `.1.de.srt`) both for preservation and slugification.
- **Decision**: Converted both settings to integers.
    - `0` means disabled/off.
    - `>0` specifies the depth (number of extension parts to process).

- **Variable Renaming**: The old names were ambiguous.
    - **Renamed** `extension_nesting_level` to `preserve_extension_depth`. This clearly indicates it keeps the file extension as a suffix.
    - **Renamed** `add_extension_to_slug` to `slugify_extension_depth`. This clearly indicates it converts the extension into part of the filename slug.

- **Precedence Logic**:
    - **Decision**: Established a clear rule that `preserve_extension_depth` takes priority if both are set > 0, ensuring files aren't accidentally renamed when preservation is intended.

## Changes
- **Config**: `config.ini` keys updated. Default `slugify_extension_depth` set to `3`.
- **Code**: `obsidian_zid_wikilink.py` and `zid_name.py` logic updated to handle `getint` for both values and implement the depth logic.
- **Tests**: `test_extensions.py` updated to verify specific depths and conflict precedence.

## Verification
- Automated tests pass (20 tests).
- Manual verification of precedence rules.
