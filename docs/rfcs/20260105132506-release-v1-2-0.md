# RFC: Release v1.2.0 - Heading Support and Complete Synchronization

**ZID**: 20260105132506
**Status**: Staging
**Request**: 20260105132506

## Goal Description
Extend the synchronized ZID logic to support Markdown headings (`#` to `######`) as valid prefixes. Ensure consistent behavior across both `obsidian_zid_wikilink.py` and the reference `zid_name.py` utility when handling batch selections that include headings.

## Implementation Details

### Analytics and Decisions
1. **Heading Prefix Identification**: Metadata and list markers (bullets, checkboxes) were already supported. Headings (`# `) are now integrated into the `zidLineRegex` and `prefixOnlyRegex` to ensure they are preserved while the title text is slugified into a wikilink or filename.
2. **Batch Mode Refinement**: Removed the hardcoded heading skip (`startswith('#')`) that previously overrode the `process_non_zid_lines` flag. Headings are now treated as "Smart List Items". This allows users to convert a list of headings into a list of wikilinks in one step.
3. **Cross-Project Synchronization**: Verified that the regex updates and prefix preservation logic are identical in both the root wikilink utility and the `ref/` filename utility. This maintains a unified processing engine across the Kardenwort ecosystem.
4. **Sentence Boundary Handling**: Added `'. ': '-'` to the replacements list. This ensures that titles formatted as sentences (e.g., `Title. Description`) are slugified cleanly into `title-description` without relying solely on regex filtering which might leave double hyphens or awkward gaps.
5. **Regex Update**: The standardized regex now includes `#{1,6}\s+`:
   `r'^(\s*(?:(?:[-*+]|\d+\.)(?:\s+\[[ xX]\])?\s+|#{1,6}\s+)?)(\d{14})\s+(.*)$'`

## Changes
- `obsidian_zid_wikilink.py`: Updated regexes and removed heading-specific skip logic in `process_line`.
- `ref/zid_name.py`: Applied identical regex and logic updates to maintain synchronization.
- `tests/test_obsidian_zid_wikilink.py`: Added test cases for headings with existing ZIDs and auto-generated ZIDs.
- `ref/tests/test_zid_name.py`: Added tests to verify heading prefix preservation during filename generation.

## Verification
- **Automated Tests**: Total 26 tests passing (12 in root, 14 in ref).
- **Manual Verification**: 
  - Input: `# 20260105131245 Just some notes here.`
  - Output: `# [[20260105131245-just-some-notes-here|Just some notes here.]]`
  - Verified `Title. Description` -> `title-description`.
  - Verified preservation of `##`, `###`, etc.

---
Created on: 2026-01-05
